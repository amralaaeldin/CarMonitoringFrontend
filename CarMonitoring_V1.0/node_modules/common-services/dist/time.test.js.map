{"version":3,"sources":["../src/time.test.ts"],"names":["describe","log","sinon","stub","beforeEach","reset","test","done","then","time","assert","deepEqual","args","catch","now","Knifecycle","register","initTimeService","run"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;;;;;AAEAA,QAAQ,CAAC,iBAAD,EAAoB,MAAM;AAChC,QAAMC,GAAG,GAAGC,eAAMC,IAAN,EAAZ;;AAEAC,EAAAA,UAAU,CAAC,MAAM;AACfH,IAAAA,GAAG,CAACI,KAAJ;AACD,GAFS,CAAV;AAIAC,EAAAA,IAAI,CAAC,aAAD,EAAiBC,IAAD,IAAU;AAC5B,uBAAgB;AACdN,MAAAA;AADc,KAAhB,EAGGO,IAHH,CAGSC,IAAD,IAAU;AACd,2BAAO,eAAe,OAAOA,IAA7B;;AACAC,sBAAOC,SAAP,CAAiBV,GAAG,CAACW,IAArB,EAA2B,CACzB,CAAC,OAAD,EAAU,+BAAV,CADyB,CAA3B;AAGD,KARH,EASGJ,IATH,CASQ,MAAMD,IAAI,EATlB,EAUGM,KAVH,CAUSN,IAVT;AAWD,GAZG,CAAJ;AAcAP,EAAAA,QAAQ,CAAC,MAAD,EAAS,MAAM;AACrBM,IAAAA,IAAI,CAAC,aAAD,EAAiBC,IAAD,IAAU;AAC5B,yBAAgB;AACdN,QAAAA;AADc,OAAhB,EAGGO,IAHH,CAGSC,IAAD,IAAU;AACdR,QAAAA,GAAG,CAACI,KAAJ;AACA,cAAMS,GAAG,GAAGL,IAAI,EAAhB;;AAEAC,wBAAOC,SAAP,CAAiBV,GAAG,CAACW,IAArB,EAA2B,CACzB,CAAC,OAAD,EAAU,yBAAV,EAAqCE,GAArC,CADyB,CAA3B;AAGD,OAVH,EAWGN,IAXH,CAWQ,MAAMD,IAAI,EAXlB,EAYGM,KAZH,CAYSN,IAZT;AAaD,KAdG,CAAJ;AAeD,GAhBO,CAAR;AAkBAD,EAAAA,IAAI,CAAC,6BAAD,EAAiCC,IAAD,IAAU;AAC5C,QAAIQ,mBAAJ,GACGC,QADH,CACYC,aADZ,EAEGD,QAFH,CAEY,0BAAS,KAAT,EAAgBf,GAAhB,CAFZ,EAGGiB,GAHH,CAGO,CAAC,MAAD,CAHP,EAIGV,IAJH,CAIQ,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAc;AAClB,2BAAOA,IAAP;;AACAC,sBAAOC,SAAP,CAAiBV,GAAG,CAACW,IAArB,EAA2B,CACzB,CAAC,OAAD,EAAU,+BAAV,CADyB,CAA3B;AAGD,KATH,EAUGJ,IAVH,CAUQ,MAAMD,IAAI,EAVlB,EAWGM,KAXH,CAWSN,IAXT;AAYD,GAbG,CAAJ;AAcD,CArDO,CAAR","sourcesContent":["import assert from 'assert';\nimport sinon from 'sinon';\nimport Knifecycle, { constant } from 'knifecycle';\nimport initTimeService from './time';\n\ndescribe('initTimeService', () => {\n  const log = sinon.stub();\n\n  beforeEach(() => {\n    log.reset();\n  });\n\n  test('should work', (done) => {\n    initTimeService({\n      log,\n    })\n      .then((time) => {\n        assert('function' === typeof time);\n        assert.deepEqual(log.args, [\n          ['debug', '⏰ - Time service initialized.'],\n        ]);\n      })\n      .then(() => done())\n      .catch(done);\n  });\n\n  describe('time', () => {\n    test('should work', (done) => {\n      initTimeService({\n        log,\n      })\n        .then((time) => {\n          log.reset();\n          const now = time();\n\n          assert.deepEqual(log.args, [\n            ['debug', '⏰ - Picked a timestamp:', now],\n          ]);\n        })\n        .then(() => done())\n        .catch(done);\n    });\n  });\n\n  test('should work with Knifecycle', (done) => {\n    new Knifecycle()\n      .register(initTimeService)\n      .register(constant('log', log))\n      .run(['time'])\n      .then(({ time }) => {\n        assert(time);\n        assert.deepEqual(log.args, [\n          ['debug', '⏰ - Time service initialized.'],\n        ]);\n      })\n      .then(() => done())\n      .catch(done);\n  });\n});\n"],"file":"time.test.js"}